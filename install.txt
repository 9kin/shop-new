https://www.linode.com/docs/development/python/flask-and-gunicorn-on-ubuntu/
https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html


sudo apt-get update
sudo apt-get upgrade

sudo apt install python3-pip python3-dev build-essential libssl-dev libffi-dev python3-setuptools git nginx

git clone https://github.com/9kin/shop

wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
sudo apt-get install apt-transport-https
echo "deb https://artifacts.elastic.co/packages/7.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-7.x.list

sudo apt install nginx
sudo vim /etc/nginx/sites-enabled/flask_app


server {
    listen 80;
    server_name 84.201.151.180;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

pip3 install -r requirements.txt


sudo apt install gunicorn3
gunicorn3 --workers=3 wsgi:app

https://certbot.eff.org/lets-encrypt/ubuntubionic-nginx

[Unit]                                                                                    
Description=flask shop                                                                    
After=network.target                                                                      
                                                                                           
[Service]                                                                                 
WorkingDirectory=/home/lxc/shop/                                                     
ExecStart=gunicorn3 --workers=3 wsgi:app                                       
Restart=always                                                                            
                                                                                           
[Install]                                                                                 
WantedBy=multi-user.target                                                                
                                        